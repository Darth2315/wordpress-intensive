window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".overlay"),t=document.querySelector("#consultation"),n=document.querySelector("#thanks"),o=document.querySelectorAll("[data-modal]"),l=document.querySelectorAll(".modal__close");function c(t){e.style.display="block",t.style.display="block"}function a(t){e.style.display="none",t.style.display="none"}function d(e){document.addEventListener("keydown",o=>{"Escape"===o.code&&"block"===e.style.display&&(a(t),a(n))})}o.forEach(e=>{e.addEventListener("click",()=>{c(t)})}),l.forEach(e=>{e.addEventListener("click",()=>{a(t),a(n)})}),e.addEventListener("click",e=>{e.target&&e.target.classList.contains("overlay")&&(a(t),a(n))}),d(t),d(n);const r=document.querySelectorAll("input"),s=document.querySelectorAll("form"),i="img/spinner.svg",u="Что-то пошло не так...";s.forEach(e=>{e.addEventListener("submit",o=>{o.preventDefault();const l=document.createElement("img");l.src=i,l.classList.add("modal__spinner"),e.appendChild(l),(async(e,t)=>{let n=await fetch(e,{method:"POST",body:t});return await n.text()})("server.php",new FormData(e)).then(e=>{console.log(e),a(t),c(n)}).catch(()=>n.textContent=u).finally(()=>{r.forEach(e=>{e.value=""}),l.remove(),setTimeout(()=>{a(n)},5e3)})})});const m=document.querySelectorAll('[href^="#"]'),y=document.querySelector(".pageup"),p=.3;window.addEventListener("scroll",()=>{document.documentElement.scrollTop>1400?(y.classList.add("fadeIn"),y.classList.remove("fadeOut"),y.style.display="block"):y.style.display="none"}),m.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=document.documentElement.scrollTop,n=this.hash,o=document.querySelector(n).getBoundingClientRect().top,l=null;requestAnimationFrame(function e(n){null===l&&(l=n);let c=n-l,a=o<0?Math.max(t-c/p,t+o):Math.min(t+c/p,t+o);document.documentElement.scrollTo(0,a);a!=t+o&&requestAnimationFrame(e)})})})});